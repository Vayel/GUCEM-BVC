{% extends "base.html" %}
{% load staticfiles %}

{% block title %}BVC{% endblock %}

{% block contents %}
<h2>Bons Vieux Campeur au GUCEM</h2>

<p>
  Questions : <strong>{{ bvc_manager_mail }}</strong>
  
<p>
  Vous pouvez recevoir par mail la liste de vos commandes en cours en remplissant
  ce formulaire :
</p>

<form action="{% url 'bvc:send_command_summary' %}" method="POST">
  {% csrf_token %}
  {{ command_summary_form }}
  <input type="submit" value="Envoyer" />
</form>
</p>

<h3>Modalités</h3>

<p>
  Pour commander des bons Vieux Campeur (BVC) il suffit de
  remplir le formulaire en bas de page.
  Vous recevrez alors un mail lorsqu'elle sera
  disponible.
</p>

<p>
  La <strong>distribution</strong> des bons se fait
  durant la <strong>permanence du mardi</strong>. Vous réglez en chèque (plus simple pour nous) ou espèces (merci
  de préparer l'appoint) le montant après réduction et
  récupérez des bons que vous pouvez donner directement au magasin en guise de
  paiement. Si vous prévenez au préalable par mail le responsable des bons, une
  personne <strong>autre que vous peut récupérer</strong> vos bons.
</p>

<p>
  Le magasin <strong>ne rend pas la monnaie</strong>. Nous dosons donc
  les bons de 10, 20 et 50 euros pour que vous puissiez approcher au plus près du prix de votre achat
  sans pour autant avoir des paquets (de bons) énormes. Néanmoins,
  si vous connaissez d'avance les <strong>dépenses faites
  en une seule fois</strong> au magasin, merci de passer une commande pour chacune
  et de cocher
  la case correspondante dans le formulaire. Ainsi, nous savons que nous pouvons
  vous donner 8 bons de 50 plutôt que 40 bons de 10 pour une dépense de 400 euros, ce qui est bien sûr plus
  pratique. Exemples :
  <ul>
    <li>Je commande pour acheter <strong>en une fois</strong> un ou plusieurs objet(s), je passe <strong>une</strong> commande et <strong>coche</strong> la case</li>
    <li>Je commande pour acheter <strong>en plusieurs fois</strong> deux objets (donc un à chaque fois), je passe <strong>deux</strong> commandes et <strong>coche</strong> la case pour chacune</li>
    <li>Je commande mais ignore comment je vais dépenser mes bons, je passe <strong>une</strong> commande et <strong>ne coche pas</strong> la case</li>
  </ul>

  Dans le doute, <strong>ne cochez pas</strong> la case. Elle sert « juste » à nous
  simplifier le travail.
</p>

<p>
  Les commandes sont <strong>mensuelles</strong> : si vous commandez vos bons <strong>avant le {{ last_day_to_command }} au soir</strong>, vous les recevrez environ une semaine après cette date limite. Les commandes du mois n non récupérées avant le {{ last_day_to_command }} du mois n+1
  sont <strong>annulées</strong>. Exemples :
  <ul>
    <li>Je commande le <strong>{{ last_day_to_command }} septembre</strong>, je reçois mes bons environ une <strong>semaine</strong> après</li>
    <li>Je commande le <strong>{{ grouped_command_day }} septembre</strong>, je reçois mes bons environ un <strong>mois</strong> après</li>
    <li>Je commande le <strong>{{ last_day_to_command }} septembre</strong> et <strong>ne passe pas</strong> chercher mes bons <strong>avant le {{ last_day_to_command }} octobre</strong>, ma commande est <strong>annulée</strong></li>
  </ul>
</p>

<p>
  En renseignant votre mail ci-dessous, vous recevrez un rappel quelques jours avant
  la date limite de commande. Si c'est déjà le cas, l'envoi du formulaire
  désactive les rappels.
</p>

<form action="{% url 'bvc:subscribe_to_reminder' %}" method="POST">
  {% csrf_token %}
  {{ grouped_cmd_reminder_form }}
  <input type="submit" value="Envoyer" />
</form>
</p>


<h3>Passer commande</h3>

<p>
  Si vous êtes une <strong>commission</strong>, merci de commander sur
  <a href="{% url 'bvc:place_commission_command' %}">cette page</a>.
  Pour les <strong>adhérents</strong>, c'est ici :
</p>

<form action="{% url 'bvc:home' %}" method="POST">
  {% csrf_token %}
  
  <table>
    {{ user_form.as_table }}
    {{ member_form.as_table }}
    {{ command_form.as_table }}
  </table>
  
  <input type="submit" value="Commander" />
</form>
{% endblock %}
